ğŸ”§ ØªØ­Ø¯ÙŠØ« v3.7.5 Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ - Smart Hold Logic for Bear Market Scalping

ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ

Ù…Ù†Ø¹ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø¨ÙƒØ± Ù…Ù† Ø§Ø±ØªØ¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‡Ø§Ø¨Ø· Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù†ÙØ³ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø© ÙˆØ§Ù„Ø³Ù„Ø§Ù…Ø©.

---

ğŸ“Œ Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµØ§Ø±Ù…

âŒ Ù…Ù…Ù†ÙˆØ¹ ØªÙ…Ø§Ù…Ø§Ù‹:

Â· ØªØ¹Ø¯ÙŠÙ„ Stop Loss Ø£Ùˆ Take Profit Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
Â· Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø´ÙƒÙ„ Ù…Ù† Averaging Ø£Ùˆ Martingale
Â· Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø© Ø£Ùˆ Ø§Ù„Ø±Ø§ÙØ¹Ø©
Â· ØªØºÙŠÙŠØ± Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

âœ… Ù…Ø³Ù…ÙˆØ­ ÙÙ‚Ø·:

Â· ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø®Ø±ÙˆØ¬ (EMA Exit) ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‡Ø§Ø¨Ø·
Â· Ø¥Ø¶Ø§ÙØ© Hold Logic Ù…Ø¤Ù‚Øª Ù„Ù„ØµÙÙ‚Ø§Øª Ø§Ù„Ø§Ø±ØªØ¯Ø§Ø¯ÙŠØ©
Â· ØªØ­Ø³ÙŠÙ† ØªØµÙ†ÙŠÙ Ù†ÙˆØ¹ Ø§Ù„ØµÙÙ‚Ø©

---

ğŸ”„ 1. ØªØµÙ†ÙŠÙ Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙˆÙ‚ (Market Regime)

```python
# Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø¨Ø³Ø· ÙˆØ§Ù„ÙØ¹Ù‘Ø§Ù„
if ema20 > ema50 and ema50 > ema200:
    market_mode = "EASY_MARKET"      # ØªØ±Ù†Ø¯ ØµØ§Ø¹Ø¯ ÙˆØ§Ø¶Ø­
else:
    market_mode = "HARD_MARKET"      # Ø³ÙˆÙ‚ Ù‡Ø§Ø¨Ø· Ø£Ùˆ Ø¬Ø§Ù†Ø¨ÙŠ
```

---

ğŸ¯ 2. ØªØ¹Ø±ÙŠÙ ØµÙÙ‚Ø© Ø§Ù„Ø§Ø±ØªØ¯Ø§Ø¯ (Bounce Entry)

```python
def is_local_extreme(current_price, price_data, lookback=15):
    """Ø§ÙƒØªØ´Ù Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¹Ø± Ø¹Ù†Ø¯ Ù‚Ø§Ø¹ Ù…Ø­Ù„ÙŠ"""
    recent_lows = price_data['low'].tail(lookback)
    return current_price <= recent_lows.min()

def check_bounce_entry():
    """Ø´Ø±ÙˆØ· Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§Ø±ØªØ¯Ø§Ø¯ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‡Ø§Ø¨Ø·"""
    if market_mode != "HARD_MARKET":
        return False
    
    current_price = get_current_price()
    current_rsi = calculate_rsi(period=14)
    
    entry_is_bounce = (
        score <= 5 and                           # ÙØ±ØµØ© Ø¬ÙŠØ¯Ø© Ø­Ø³Ø¨ Ø³ÙƒÙˆØ± Ø§Ù„Ø¨ÙˆØª
        is_local_extreme(current_price, price_data) and  # Ù‚Ø§Ø¹ Ù…Ø­Ù„ÙŠ
        current_rsi <= 35 and                    # ØªØ´Ø¨Ø¹ Ø¨ÙŠØ¹
        volume_spike_detected()                  # Ø§Ø±ØªÙØ§Ø¹ Ø­Ø¬Ù… Ù…ÙØ§Ø¬Ø¦
    )
    
    return entry_is_bounce
```

---

ğŸ›¡ï¸ 3. ØªÙØ¹ÙŠÙ„ Hold Logic

```python
# Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ ØµÙÙ‚Ø©
if check_bounce_entry():
    state.hold_active = True
    state.hold_candles = 0
    state.hold_start_price = entry_price
    logger.info("[HOLD ACTIVATED] Bounce trade in bear market")
else:
    state.hold_active = False
```

---

âš¡ 4. ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†Ø·Ù‚ EMA Exit

```python
# ÙÙŠ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
if ema_exit_triggered:
    if state.hold_active:
        # ØªØ¬Ø§Ù‡Ù„ EMA Exit Ù…Ø¤Ù‚ØªØ§Ù‹
        logger.info(f"[HOLD] Ignoring EMA exit | Candles: {state.hold_candles}")
        log_hold_status()
    else:
        # Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
        exit_trade("EMA Exit", current_price)
```

---

ğŸš¨ 5. Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø±ÙˆØ¬ Ø£Ø«Ù†Ø§Ø¡ Hold (Ø£ÙŠ Ø´Ø±Ø· â‡’ Ø®Ø±ÙˆØ¬ ÙÙˆØ±ÙŠ)

```python
def check_hold_exit_conditions():
    """ÙØ­Øµ Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø±ÙˆØ¬ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù€ Hold"""
    if not state.hold_active:
        return None
    
    current_price = get_current_price()
    current_candle = get_current_candle()
    
    # 1ï¸âƒ£ STOP LOSS (Ø£ÙˆÙ„ÙˆÙŠØ© Ù‚ØµÙˆÙ‰ - Ù„Ø§ ØªØºÙŠÙŠØ±)
    if current_price <= stop_loss:
        return "SL Hit (Hold)"
    
    # 2ï¸âƒ£ ÙØ´Ù„ Ø³Ø¹Ø±ÙŠ (Ø¯Ø±ÙˆØ¯Ø§ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯)
    max_drawdown = entry_price * 0.9990  # -0.10% ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰
    if current_price <= max_drawdown:
        return "Hold Failed - Max Drawdown"
    
    # 3ï¸âƒ£ ØªØ­Ù‚ÙŠÙ‚ Ù‡Ø¯Ù ÙˆØ§Ù‚Ø¹ÙŠ Ù„Ù„Ø³ÙƒØ§Ù„Ø¨
    scalp_target = entry_price * 1.003  # +0.3%
    if current_price >= scalp_target:
        return "Scalp Target Hit"
    
    # 4ï¸âƒ£ ÙØ´Ù„ Ø²Ù…Ù†ÙŠ Ù…Ø¹ Ø¶Ø¹Ù Ø§Ù„Ø²Ø®Ù…
    if state.hold_candles >= 5:
        # ØªØ­Ù‚Ù‚ Ù…Ù† Ø¶Ø¹Ù Ø§Ù„Ø­Ø¬Ù…
        recent_volume_avg = price_data['volume'].tail(3).mean()
        normal_volume_avg = price_data['volume'].tail(20).mean()
        
        if recent_volume_avg < normal_volume_avg * 0.65:
            return "Hold Failed - No Momentum"
    
    # 5ï¸âƒ£ ÙƒØ³Ø± Ù‡Ø§Ø¨Ø· Ù‚ÙˆÙŠ (Ø´Ù…Ø¹Ø© Ù‡Ø§Ø¨Ø·Ø© ÙƒØ¨ÙŠØ±Ø©)
    bearish_strength = detect_bearish_strength(current_candle)
    if bearish_strength == "STRONG":
        return "Hold Failed - Strong Breakdown"
    
    # 6ï¸âƒ£ Ù‚ÙŠØ¯ Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠØ©
    if state.daily_cumulative_loss >= 1.0:  # 1% ÙƒØ­Ø¯ ÙŠÙˆÙ…ÙŠ
        return "Hold Disabled - Daily Loss Limit"
    
    return None  # Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¨Ø¨ Ù„Ù„Ø®Ø±ÙˆØ¬
```

---

ğŸ”„ 6. Ø¥Ø¯Ø§Ø±Ø© Hold Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„ÙˆØ¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ

```python
# ÙÙŠ ÙƒÙ„ ØªÙƒØ±Ø§Ø± Ù„Ù„ÙˆØ¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
if state.hold_active:
    # Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø´Ù…ÙˆØ¹
    state.hold_candles += 1
    
    # ÙØ­Øµ Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø±ÙˆØ¬
    exit_reason = check_hold_exit_conditions()
    if exit_reason:
        exit_trade(exit_reason, get_current_price())
        state.hold_active = False
        state.hold_candles = 0
```

---

ğŸ“Š 7. Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ´Ø®ÙŠØµÙŠ

```python
def log_hold_status():
    """ØªØ³Ø¬ÙŠÙ„ Ù…ÙØµÙ„ Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù€ Hold"""
    logger.info(f"""
    ğŸ“Š HOLD STATUS [{timestamp}]
    â”œâ”€â”€ Active: {state.hold_active}
    â”œâ”€â”€ Candles Held: {state.hold_candles}
    â”œâ”€â”€ Market Mode: {market_mode}
    â”œâ”€â”€ Entry Price: {state.hold_start_price:.6f}
    â”œâ”€â”€ Current Price: {get_current_price():.6f}
    â”œâ”€â”€ Drawdown: {calculate_drawdown():.4f}%
    â””â”€â”€ Daily Loss: {state.daily_cumulative_loss:.2f}%
    """)

def log_market_context():
    """ØªØ³Ø¬ÙŠÙ„ Ø³ÙŠØ§Ù‚ Ø§Ù„Ø³ÙˆÙ‚"""
    logger.info(f"""
    ğŸŒ MARKET CONTEXT
    â”œâ”€â”€ Mode: {market_mode}
    â”œâ”€â”€ Trend: {'Bullish' if market_mode == 'EASY_MARKET' else 'Bearish/Sideways'}
    â”œâ”€â”€ EMAs: 20={ema20:.5f} | 50={ema50:.5f} | 200={ema200:.5f}
    â”œâ”€â”€ RSI: {calculate_rsi():.1f}
    â””â”€â”€ Volatility: {calculate_volatility():.4f}%
    """)
```

---

âš™ï¸ 8. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª

```python
class TradingState:
    def __init__(self):
        # Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ...
        
        # Ù…ØªØºÙŠØ±Ø§Øª Hold Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        self.hold_active = False
        self.hold_candles = 0
        self.hold_start_price = 0.0
        self.daily_cumulative_loss = 0.0
        self.hold_activation_count = 0
        
    def reset_hold(self):
        """Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ù€ Hold"""
        self.hold_active = False
        self.hold_candles = 0
        self.hold_start_price = 0.0
        
    def update_daily_loss(self, pnl_percent):
        """ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠØ©"""
        if pnl_percent < 0:
            self.daily_cumulative_loss += abs(pnl_percent)
            
    def reset_daily_counters(self):
        """Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ø¹Ù†Ø¯ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„)"""
        if is_midnight_utc():
            self.daily_cumulative_loss = 0.0
            self.hold_activation_count = 0
            logger.info("[DAILY RESET] Counters cleared")
```

---

ğŸ› ï¸ 9. Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```python
def volume_spike_detected():
    """Ø§ÙƒØªØ´Ø§Ù Ø§Ø±ØªÙØ§Ø¹ Ù…ÙØ§Ø¬Ø¦ ÙÙŠ Ø§Ù„Ø­Ø¬Ù…"""
    current_volume = get_current_volume()
    avg_volume = price_data['volume'].tail(20).mean()
    return current_volume > avg_volume * 1.8  # +80%

def detect_bearish_strength(candle):
    """ØªØ­Ø¯ÙŠØ¯ Ù‚ÙˆØ© Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„Ù‡Ø§Ø¨Ø·Ø©"""
    body_size = abs(candle['close'] - candle['open'])
    candle_range = candle['high'] - candle['low']
    body_ratio = body_size / candle_range if candle_range > 0 else 0
    
    if candle['close'] < candle['open'] and body_ratio > 0.7:
        return "STRONG"
    elif candle['close'] < candle['open'] and body_ratio > 0.5:
        return "MEDIUM"
    return "WEAK"

def calculate_drawdown():
    """Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ø±ÙˆØ¯Ø§ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠØ©"""
    if state.hold_start_price > 0:
        current = get_current_price()
        return ((state.hold_start_price - current) / state.hold_start_price) * 100
    return 0.0
```

---

ğŸ“ˆ 10. Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«

ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ØµØ§Ø¹Ø¯ (EASY_MARKET):

Â· Ù†ÙØ³ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±
Â· EMA Exit ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ
Â· Ø¨Ø¯ÙˆÙ† Hold Logic
Â· Ø¯Ø®ÙˆÙ„ Ø£ÙƒØ«Ø±ØŒ Ø®Ø±ÙˆØ¬ Ø£Ø³Ø±Ø¹

ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‡Ø§Ø¨Ø· (HARD_MARKET):

Â· Ø¯Ø®ÙˆÙ„ Ø£Ù‚Ù„ Ù„ÙƒÙ† Ø£Ø°ÙƒÙ‰ (ÙÙ‚Ø· Ø§Ø±ØªØ¯Ø§Ø¯Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©)
Â· ØªØ¬Ø§Ù‡Ù„ EMA Exit Ø§Ù„Ù…Ø¨ÙƒØ±
Â· ØµÙŠØ¯ Ø§Ø±ØªØ¯Ø§Ø¯Ø§Øª Ù‚ØµÙŠØ±Ø© (+0.3% Ù‡Ø¯Ù)
Â· ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØµÙÙ‚Ø§Øª Ø§Ù„Ø®Ø§Ø³Ø±Ø© Ø§Ù„ØµØºÙŠØ±Ø© (+0.02% â†’ Ø®Ø±ÙˆØ¬)

---

âœ… Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ù…Ù‚Ø§Ø³Ø©

1. Ù…Ø¹Ø¯Ù„ Ù†Ø¬Ø§Ø­ Ø§Ù„Ù€ Hold > 55%
2. Ù…ØªÙˆØ³Ø· Ø±Ø¨Ø­ ØµÙÙ‚Ø§Øª Ø§Ù„Ù€ Hold â‰¥ 0.25%
3. Ø¹Ø¯Ù… Ø²ÙŠØ§Ø¯Ø© Ø£Ù‚ØµÙ‰ Ø¯Ø±ÙˆØ¯Ø§ÙˆÙ†
4. Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù†ÙØ³ Ù†Ø³Ø¨Ø© Ø§Ù„Ù€ Win Rate Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©

---

ğŸš€ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°

1. Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
2. Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ù€ Hold
3. Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: ØªØ·Ø¨ÙŠÙ‚ ØªØ¹Ø¯ÙŠÙ„Ø§Øª EMA Exit
4. Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„
5. Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù„Ù‰ Paper Trading Ù„Ù…Ø¯Ø© 48 Ø³Ø§Ø¹Ø©

---

ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ©:
Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø¯ÙŠØ­ ÙŠØ­ÙˆÙ„ Ø§Ù„Ø¨ÙˆØª Ù…Ù† "Ø¬ÙŠØ¯ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³Ù‡Ù„" Ø¥Ù„Ù‰ "Ø°ÙƒÙŠ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ØµØ¹Ø¨" Ø¨Ø¯ÙˆÙ† ÙƒØ³Ø± Ø£ÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø£Ù…Ø§Ù†. Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù†Ø¸ÙŠÙØ©ØŒ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚ÙŠØ§Ø³ØŒ ÙˆØªØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¨Ø³Ø§Ø·Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ.

---

ğŸ“‹ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Replit Agent Ù„Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙÙˆØ±ÙŠ.